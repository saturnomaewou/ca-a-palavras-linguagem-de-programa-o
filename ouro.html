<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <title>Jogo do Leprechaun</title>
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }
    body {
      display: flex; flex-direction: column;
      align-items: center; background: #6dde6d;
      color: #fff; font-family: sans-serif;
      user-select: none; overflow: hidden;
    }
    #game {
      background: #0b904d; border: 4px solid rgb(37, 147, 37);
      margin-top: 20px;
    }
    #status {
      margin-top: 12px; font-size: 1.2rem;
    }
  </style>
</head>
<body>

  <h1>Jogo do Leprechaun</h1>
   <a href="index.html" class="btn-jogar">Voltar</a>
  <canvas id="game" width="640" height="640"></canvas>
  <div id="status">Pegue todos os potes de ouro!</div>

  <script>
    

    const canvas = document.getElementById('game');
    const ctx = canvas.getContext('2d');
    const tileSize = 32;
    const cols = canvas.width / tileSize;
    const rows = canvas.height / tileSize;

    // Mapa: 0 = vazio, 1 = parede, 2 = pote de ouro
    const mapData = [
      [1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],
      [1,2,0,0,0,0,1,0,2,0,0,1,0,0,0,0,2,0,0,1],
      [1,0,1,1,0,0,1,0,1,1,0,1,0,1,1,0,0,1,0,1],
      [1,0,1,0,0,0,0,0,0,1,0,0,0,0,1,0,0,1,2,1],
      [1,0,1,0,1,1,1,1,0,1,1,1,1,0,1,1,0,1,0,1],
      [1,2,0,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1,0,1],
      [1,0,1,1,1,0,0,1,1,1,1,0,1,1,1,0,1,1,0,1],
      [1,0,0,0,1,0,2,0,0,0,1,0,0,0,1,0,0,0,2,1],
      [1,1,1,0,1,1,1,1,1,0,1,1,1,0,1,1,1,0,1,1],
      [1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],
      [1,0,1,1,1,0,1,1,1,1,1,1,1,0,1,1,1,1,0,1],
      [1,0,0,2,1,0,0,0,0,0,0,0,1,0,0,2,0,0,0,1],
      [1,1,1,0,1,1,1,1,1,1,1,0,1,1,1,0,1,1,1,1],
      [1,2,0,0,0,0,1,0,2,0,0,1,0,0,0,0,2,0,0,1],
      [1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]
    ];

    // Entidades
    const player = { x: 1, y: 1, color: '#ff0' };
    const leprechaun = { x: cols - 2, y: rows - 2, color: '#0f0' };

    let remaining = 0;
    let gameOver = false;

    // Desenha o mapa e entidades
    function draw() {
      ctx.clearRect(0, 0, canvas.width, canvas.height);

      // Chão, paredes e potes
      for (let y = 0; y < mapData.length; y++) {
        for (let x = 0; x < mapData[y].length; x++) {
          const tile = mapData[y][x];
          if (tile === 1) {
            ctx.fillStyle = '#444'; // parede
            ctx.fillRect(x*tileSize, y*tileSize, tileSize, tileSize);
          }
          if (tile === 2) {
            ctx.fillStyle = '#ff0'; // pote de ouro
            ctx.beginPath();
            ctx.arc(x*tileSize + tileSize/2, y*tileSize + tileSize/2, tileSize/4, 0, 2*Math.PI);
            ctx.fill();
          }
        }
      }

      // Jogador
      ctx.fillStyle = player.color;
      ctx.fillRect(player.x*tileSize+4, player.y*tileSize+4, tileSize-8, tileSize-8);

      // Leprechaun
      ctx.fillStyle = leprechaun.color;
      ctx.fillRect(leprechaun.x*tileSize+4, leprechaun.y*tileSize+4, tileSize-8, tileSize-8);
    }

    // Contabiliza potes no mapa
    function countGold() {
      remaining = mapData.flat().filter(v => v === 2).length;
    }

    // Movimenta jogador se o destino não for parede
    function tryMove(entity, dx, dy) {
      const nx = entity.x + dx;
      const ny = entity.y + dy;
      if (mapData[ny] && mapData[ny][nx] !== 1) {
        entity.x = nx; entity.y = ny;
      }
    }

    // Coleta ouro se existir
    function collect() {
      if (mapData[player.y][player.x] === 2) {
        mapData[player.y][player.x] = 0;
        remaining--;
      }
    }

    // IA simples do Leprechaun (segue o jogador)
    function moveLeprechaun() {
      const dx = player.x - leprechaun.x;
      const dy = player.y - leprechaun.y;
      const moves = [];
      if (dx > 0) moves.push([1,0]);
      if (dx < 0) moves.push([-1,0]);
      if (dy > 0) moves.push([0,1]);
      if (dy < 0) moves.push([0,-1]);
      // tenta cada opção até achar caminho livre
      for (let [mx, my] of moves) {
        const nx = leprechaun.x + mx;
        const ny = leprechaun.y + my;
        if (mapData[ny] && mapData[ny][nx] !== 1) {
          leprechaun.x = nx; leprechaun.y = ny;
          break;
        }
      }
    }

    // Atualiza estado a cada ciclo
    function update() {
      if (gameOver) return;

      moveLeprechaun();
      if (leprechaun.x === player.x && leprechaun.y === player.y) {
        document.getElementById('status').textContent = 'Você foi pego! GAME OVER.';
        gameOver = true;
      }
      if (remaining === 0) {
        document.getElementById('status').textContent = 'Parabéns! Você coletou tudo.';
        gameOver = true;
      }

      draw();
      if (!gameOver) setTimeout(update, 200);
    }

    // Leitura de teclas
    window.addEventListener('keydown', e => {
      if (gameOver) return;
      switch (e.code) {
        case 'ArrowUp':    tryMove(player, 0, -1); break;
        case 'ArrowDown':  tryMove(player, 0, 1);  break;
        case 'ArrowLeft':  tryMove(player, -1, 0); break;
        case 'ArrowRight': tryMove(player, 1, 0);  break;
      }
      collect();
      draw();
    });

    // Inicialização
    countGold();
    draw();
    setTimeout(update, 200);
  </script>
 
</body>
</html>

<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <title>Jogo de Pife</title>
  <style>
    body {
      font-family: sans-serif;
      display: flex;
      flex-direction: column;
      align-items: center;
      background: #2a2a2a;
      color: #f0f0f0;
      margin: 0;
      padding: 20px;
    }

    h1 {
      margin-bottom: 10px;
    }

    #table {
      display: flex;
      gap: 40px;
      margin-top: 20px;
    }

    .pile {
      display: flex;
      flex-direction: column;
      align-items: center;
      cursor: pointer;
    }

    .pile .label {
      margin-bottom: 5px;
    }

    .card, .card-back {
      width: 60px;
      height: 90px;
      border-radius: 6px;
      display: flex;
      justify-content: center;
      align-items: center;
      font-size: 1.2rem;
      user-select: none;
    }

    .card-back {
      background: #444;
      border: 2px solid #666;
    }

    .card {
      background: #fff;
      color: #000;
      border: 2px solid #222;
      margin: 4px;
      cursor: pointer;
    }

    #hand {
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      margin-top: 20px;
      max-width: 90vw;
    }

    #status {
      margin-top: 20px;
    }
  </style>
</head>
<body>

  <h1>Jogo de Pife</h1>

  <div id="table">
    <div id="deck" class="pile">
      <div class="label">Compra</div>
      <div class="card-back"></div>
      <div id="deck-count">52</div>
    </div>
    <div id="discard" class="pile">
      <div class="label">Descarte</div>
      <div id="discard-top" class="card-back"></div>
    </div>
  </div>

  <div id="hand"></div>

  <div id="status"></div>

  <script>
    // Monta o baralho de 52 cartas
    const suits = ['♠','♥','♦','♣'];
    const ranks = ['A','2','3','4','5','6','7','8','9','10','J','Q','K'];
    let deck = [];
    suits.forEach(s => ranks.forEach(r => deck.push({ suit: s, rank: r })));

    // Estado do jogo
    let playerHand = [];
    let computerHand = [];
    let discardPile = [];

    const deckEl = document.getElementById('deck');
    const deckCountEl = document.getElementById('deck-count');
    const discardTopEl = document.getElementById('discard-top');
    const handEl = document.getElementById('hand');
    const statusEl = document.getElementById('status');

    // Embaralha array in-place
    function shuffle(arr) {
      for (let i = arr.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [arr[i], arr[j]] = [arr[j], arr[i]];
      }
    }

    // Renderiza mão do jogador clicável
    function renderHand() {
      handEl.innerHTML = '';
      playerHand.forEach((card, idx) => {
        const c = document.createElement('div');
        c.className = 'card';
        c.textContent = card.rank + card.suit;
        c.onclick = () => discard(idx);
        handEl.appendChild(c);
      });
    }

    // Atualiza contadores na UI
    function updateUI() {
      deckCountEl.textContent = deck.length;
      if (discardPile.length) {
        const top = discardPile[discardPile.length - 1];
        discardTopEl.textContent = top.rank + top.suit;
        discardTopEl.className = 'card';
      } else {
        discardTopEl.textContent = '';
        discardTopEl.className = 'card-back';
      }
    }

    // Inicia o jogo: embaralha e distribui 10 cartas a cada
    function startGame() {
      shuffle(deck);
      playerHand = deck.splice(0, 10);
      computerHand = deck.splice(0, 10);
      discardPile = [deck.pop()];
      renderHand();
      updateUI();
      statusEl.textContent = 'Sua vez: compre do monte ou descarte.';
    }

    // Jogador compra do monte
    deckEl.onclick = () => {
      if (!deck.length) return;
      playerHand.push(deck.pop());
      renderHand();
      updateUI();
      statusEl.textContent = 'Agora descarte uma carta da mão.';
    };

    // Jogador compra do descarte
    discardTopEl.onclick = () => {
      if (!discardPile.length) return;
      playerHand.push(discardPile.pop());
      renderHand();
      updateUI();
      statusEl.textContent = 'Agora descarte uma carta da mão.';
    };

    // Jogador descarta uma carta da mão
    function discard(handIndex) {
      const card = playerHand.splice(handIndex, 1)[0];
      discardPile.push(card);
      renderHand();
      updateUI();
      // Verifica vitória do jogador
      if (playerHand.length === 0) {
        statusEl.textContent = 'Você venceu!';
        disableActions();
        return;
      }
      // Vez do computador
      statusEl.textContent = 'Vez do computador...';
      setTimeout(computerTurn, 700);
    }

    // Lógica simples para o computador: compra e descarta aleatório
    function computerTurn() {
      // compra do monte se disponível, senão do descarte
      let card;
      if (deck.length) {
        card = deck.pop();
      } else {
        card = discardPile.pop();
      }
      computerHand.push(card);
      // descarta carta aleatória
      const idx = Math.floor(Math.random() * computerHand.length);
      const discarded = computerHand.splice(idx, 1)[0];
      discardPile.push(discarded);
      updateUI();
      // Verifica vitória do computador
      if (computerHand.length === 0) {
        statusEl.textContent = 'Computador venceu!';
        disableActions();
        return;
      }
      statusEl.textContent = 'Sua vez: compre ou use descarte.';
    }

    // Desabilita cliques após fim de jogo
    function disableActions() {
      deckEl.onclick = null;
      discardTopEl.onclick = null;
      playerHand = []; // limpa para não renderizar mais
      renderHand();
    }

    // Inicia tudo
    startGame();
  </script>
    <a href="index.html" class="btn-jogar">Voltar</a>
</body>
</html>


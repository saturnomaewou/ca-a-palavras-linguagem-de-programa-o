<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <title>Mini Pac-Man</title>
  <style>
    body {
      margin: 0;
      background-color: black;
    }
    canvas {
      display: block;
      margin: auto;
      background-color: #000;
    }
  </style>
</head>
<body>
  <canvas id="gameCanvas" width="400" height="400"></canvas>

  <script>
    const canvas = document.getElementById('gameCanvas');
    const ctx = canvas.getContext('2d');

    const tileSize = 40;
    const rows = 10;
    const cols = 10;

    const maze = [
      "##########",
      "#........#",
      "#.####.#.#",
      "#.#..#.#.#",
      "#.#.##.#.#",
      "#.#....#.#",
      "#.######.#",
      "#........#",
      "#.######.#",
      "##########"
    ];

    let player = { x: 1, y: 1 };
    let enemy = { x: 8, y: 8 };
    let score = 0;

    function drawMaze() {
      for (let y = 0; y < rows; y++) {
        for (let x = 0; x < cols; x++) {
          const tile = maze[y][x];
          if (tile === "#") {
            ctx.fillStyle = "blue";
            ctx.fillRect(x * tileSize, y * tileSize, tileSize, tileSize);
          } else {
            ctx.fillStyle = "black";
            ctx.fillRect(x * tileSize, y * tileSize, tileSize, tileSize);
            ctx.fillStyle = "white";
            ctx.beginPath();
            ctx.arc(x * tileSize + tileSize / 2, y * tileSize + tileSize / 2, 5, 0, Math.PI * 2);
            ctx.fill();
          }
        }
      }
    }

    function drawPlayer() {
      ctx.fillStyle = "yellow";
      ctx.beginPath();
      ctx.arc(player.x * tileSize + tileSize / 2, player.y * tileSize + tileSize / 2, 15, 0.25 * Math.PI, 1.75 * Math.PI);
      ctx.lineTo(player.x * tileSize + tileSize / 2, player.y * tileSize + tileSize / 2);
      ctx.fill();
    }

    function drawEnemy() {
      ctx.fillStyle = "red";
      ctx.beginPath();
      ctx.arc(enemy.x * tileSize + tileSize / 2, enemy.y * tileSize + tileSize / 2, 15, 0, Math.PI * 2);
      ctx.fill();
    }

    function moveEnemy() {
      const directions = [
        { x: 0, y: -1 },
        { x: 0, y: 1 },
        { x: -1, y: 0 },
        { x: 1, y: 0 }
      ];
      const dir = directions[Math.floor(Math.random() * directions.length)];
      const newX = enemy.x + dir.x;
      const newY = enemy.y + dir.y;
      if (maze[newY][newX] !== "#") {
        enemy.x = newX;
        enemy.y = newY;
      }
    }

    function update() {
      if (maze[player.y][player.x] === ".") {
        maze[player.y] = maze[player.y].substring(0, player.x) + " " + maze[player.y].substring(player.x + 1);
        score++;
      }

      if (player.x === enemy.x && player.y === enemy.y) {
        alert("Você foi pego! Pontuação: " + score);
        document.location.reload();
      }

      ctx.clearRect(0, 0, canvas.width, canvas.height);
      drawMaze();
      drawPlayer();
      drawEnemy();
    }

    document.addEventListener("keydown", (e) => {
      let newX = player.x;
      let newY = player.y;

      if (e.key === "ArrowUp") newY--;
      if (e.key === "ArrowDown") newY++;
      if (e.key === "ArrowLeft") newX--;
      if (e.key === "ArrowRight") newX++;

      if (maze[newY][newX] !== "#") {
        player.x = newX;
        player.y = newY;
      }

      update();
    });

    setInterval(() => {
      moveEnemy();
      update();
    }, 500);

    update();
  </script>
</body>
</html>

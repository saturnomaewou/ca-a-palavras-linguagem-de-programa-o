<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Caça-Palavras Responsivo</title>
  <style>
    /* Estilos base */
    body {
      font-family: sans-serif;
      display: flex;
      flex-direction: column;
      align-items: center;
      margin: 20px;
      background-color: #E6E6FA; /* fundo lilás claro */
      color: #333;
    }

    h1 {
      margin-bottom: 10px;
      font-size: clamp(1.5rem, 4vw, 2rem);
      text-align: center;
    }

    #word-list {
      margin-bottom: 20px;
      width: 100%;
      max-width: 600px;
    }

    #word-list ul {
      list-style: none;
      padding: 0;
      display: flex;
      flex-wrap: wrap;
      gap: 10px;
      justify-content: center;
    }

    #word-list li {
      background: #5f3073;
      padding: 4px 8px;
      border-radius: 4px;
      font-size: clamp(0.8rem, 2vw, 1rem);
      color: #fff;
    }

    #word-list li.found {
      text-decoration: line-through;
      color: #dda0dd;
      opacity: 0.6;
    }

    /* Grid responsivo */
    #grid {
      display: grid;
      grid-template-columns: repeat(12, 1fr);
      gap: 5px;
      width: 100%;
      max-width: 600px;
    }

    .cell {
      width: 100%;
      aspect-ratio: 1;
      border: 1px solid #b25cbe;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      font-weight: bold;
      font-size: clamp(0.8rem, 2vw, 1.2rem);
      transition: background .2s;
      user-select: none;
      background: #faf0ff;
      color: #333;
    }

    .cell.selected {
      background: #D8BFD8;
    }

    .cell.found {
      background: #dda0dd;
      color: #4b0082;
    }

    /* Botão */
    #reset {
      margin-top: 20px;
      padding: 8px 16px;
      font-size: clamp(0.9rem, 2.5vw, 1.1rem);
      border: none;
      background: #370574;
      color: #fff;
      border-radius: 4px;
      cursor: pointer;
      transition: background .2s;
    }

    #reset:hover {
      background: #c730c5;
    }

    /* Ajustes para telas menores */
    @media (max-width: 480px) {
      body {
        margin: 10px;
      }

      #word-list ul {
        gap: 6px;
      }

      #grid {
        gap: 1px;
      }

      #reset {
        padding: 6px 12px;
      }
    }
  </style>
</head>
<body>
  <h1>Caça-Palavras</h1>

  <div id="word-list">
    <strong>Encontre as palavras:</strong>
    <ul id="words"></ul>
  </div>

  <div id="grid"></div>

  <button id="reset">Reiniciar Jogo</button>

  <script>
    const WORDS = ['HTML','CSS','JAVASCRIPT','FUN','PUZZLE','CODE'];
    const SIZE = 12;
    const DIRECTIONS = [
      [ 0,  1], [ 1,  0], [ 0, -1], [-1,  0],
      [ 1,  1], [ 1, -1], [-1,  1], [-1, -1]
    ];

    function createEmptyGrid(n) {
      return Array.from({length: n}, () => Array(n).fill(''));
    }

    function canPlace(grid, word, row, col, dir) {
      const [dr, dc] = dir;
      for (let i = 0; i < word.length; i++) {
        const r = row + dr * i;
        const c = col + dc * i;
        if (r < 0 || r >= SIZE || c < 0 || c >= SIZE) return false;
        if (grid[r][c] && grid[r][c] !== word[i]) return false;
      }
      return true;
    }

    function placeWord(grid, word) {
      const attempts = 1000;
      for (let i = 0; i < attempts; i++) {
        const dir = DIRECTIONS[Math.floor(Math.random() * DIRECTIONS.length)];
        const row = Math.floor(Math.random() * SIZE);
        const col = Math.floor(Math.random() * SIZE);
        if (canPlace(grid, word, row, col, dir)) {
          for (let k = 0; k < word.length; k++) {
            grid[row + dir[0]*k][col + dir[1]*k] = word[k];
          }
          return true;
        }
      }
      return false;
    }

    function fillRandom(grid) {
      const letters = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ';
      for (let i = 0; i < SIZE; i++) {
        for (let j = 0; j < SIZE; j++) {
          if (!grid[i][j]) {
            grid[i][j] = letters.charAt(Math.floor(Math.random() * letters.length));
          }
        }
      }
    }

    let gridData, foundWords;

    function initGame() {
      gridData = createEmptyGrid(SIZE);
      foundWords = new Set();
      WORDS.forEach(w => {
        if (!placeWord(gridData, w)) {
          console.warn(`Não foi possível posicionar: ${w}`);
        }
      });
      fillRandom(gridData);
      renderWordList();
      renderGrid();
    }

    function renderWordList() {
      const ul = document.getElementById('words');
      ul.innerHTML = '';
      WORDS.forEach(w => {
        const li = document.createElement('li');
        li.textContent = w;
        li.id = `word-${w}`;
        ul.appendChild(li);
      });
    }

    function renderGrid() {
      const container = document.getElementById('grid');
      container.innerHTML = '';
      for (let i = 0; i < SIZE; i++) {
        for (let j = 0; j < SIZE; j++) {
          const span = document.createElement('span');
          span.className = 'cell';
          span.dataset.row = i;
          span.dataset.col = j;
          span.textContent = gridData[i][j];
          container.appendChild(span);
        }
      }
      attachSelectionHandlers();
    }

    function attachSelectionHandlers() {
      const cells = document.querySelectorAll('.cell');
      let selecting = false;
      let path = [];
      let lastPos = null;

      cells.forEach(cell => {
        cell.addEventListener('mousedown', e => {
          selecting = true;
          path = [e.target];
          lastPos = [+e.target.dataset.row, +e.target.dataset.col];
          e.target.classList.add('selected');
        });
        cell.addEventListener('mouseover', e => {
          if (!selecting) return;
          const r = +e.target.dataset.row;
          const c = +e.target.dataset.col;
          const dr = r - lastPos[0], dc = c - lastPos[1];
          if (Math.abs(dr) <= 1 && Math.abs(dc) <= 1 && !path.includes(e.target)) {
            path.push(e.target);
            lastPos = [r, c];
            e.target.classList.add('selected');
          }
        });
      });

      document.addEventListener('mouseup', () => {
        if (!selecting) return;
        selecting = false;
        const word = path.map(c => c.textContent).join('');
        const rev  = path.map(c => c.textContent).reverse().join('');
        if (WORDS.includes(word) && !foundWords.has(word)) markFound(path, word);
        else if (WORDS.includes(rev) && !foundWords.has(rev)) markFound(path, rev);
        else clearSelection(path);
        path = [];
      });
    }

    function markFound(path, w) {
      foundWords.add(w);
      path.forEach(c => {
        c.classList.remove('selected');
        c.classList.add('found');
      });
      document.getElementById(`word-${w}`).classList.add('found');
      if (foundWords.size === WORDS.length) {
        setTimeout(() => alert('Parabéns! Encontrou todas as palavras!'), 100);
      }
    }

    function clearSelection(path) {
      path.forEach(c => c.classList.remove('selected'));
    }

    document.getElementById('reset').addEventListener('click', initGame);
    window.onload = initGame;
  </script>
</body>
</html>

<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Jogo de Tiro ao Alvo</title>
  <style>
    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }

    body {
      display: flex;
      flex-direction: column;
      align-items: center;
      font-family: Arial, sans-serif;
      background: #eef2f5;
      padding: 1rem;
    }

    h1 {
      margin-bottom: 0.5rem;
    }

    #game-info {
      margin-bottom: 1rem;
      display: flex;
      gap: 1.5rem;
      align-items: center;
    }

    #game-canvas {
      border: 2px solid #333;
      background: #fff;
      cursor: crosshair;
    }

    button {
      padding: 0.5rem 1rem;
      font-size: 1rem;
      cursor: pointer;
    }
  </style>
</head>
<body>
  <h1>Jogo de Tiro ao Alvo</h1>
  <div id="game-info">
    <span>Pontuação: <span id="score">0</span></span>
    <button id="start-btn">Iniciar Jogo</button>
  </div>
  <canvas id="game-canvas" width="800" height="600"></canvas>

  <script>
    const canvas = document.getElementById('game-canvas');
    const ctx = canvas.getContext('2d');
    const scoreEl = document.getElementById('score');
    const startBtn = document.getElementById('start-btn');

    let score = 0;
    let target = null;
    let gameInterval = null;
    let spawnTimeout = null;
    const gameDuration = 30 * 1000; // duração total do jogo (30s)
    const targetLife = 1000;       // tempo que o alvo fica visível (1s)

    function randomBetween(min, max) {
      return Math.random() * (max - min) + min;
    }

    function spawnTarget() {
      const r = 30;
      const x = randomBetween(r, canvas.width - r);
      const y = randomBetween(r, canvas.height - r);
      target = { x, y, r };

      draw();
      spawnTimeout = setTimeout(() => {
        clearCanvas();
        target = null;
      }, targetLife);
    }

    function draw() {
      clearCanvas();
      if (!target) return;
      ctx.beginPath();
      ctx.arc(target.x, target.y, target.r, 0, Math.PI * 2);
      ctx.fillStyle = '#e74c3c';
      ctx.fill();
      ctx.lineWidth = 3;
      ctx.strokeStyle = '#c0392b';
      ctx.stroke();
    }

    function clearCanvas() {
      ctx.clearRect(0, 0, canvas.width, canvas.height);
    }

    function handleShot(e) {
      if (!target) return;
      const rect = canvas.getBoundingClientRect();
      const mx = e.clientX - rect.left;
      const my = e.clientY - rect.top;
      const dist = Math.hypot(mx - target.x, my - target.y);

      if (dist <= target.r) {
        score++;
        scoreEl.textContent = score;
        clearTimeout(spawnTimeout);
        target = null;
        clearCanvas();
      }
    }

    function startGame() {
      score = 0;
      scoreEl.textContent = score;
      startBtn.disabled = true;

      const startTime = Date.now();
      spawnTarget();

      gameInterval = setInterval(() => {
        if (Date.now() - startTime >= gameDuration) {
          endGame();
        } else {
          spawnTarget();
        }
      }, targetLife + 300);
    }

    function endGame() {
      clearInterval(gameInterval);
      clearTimeout(spawnTimeout);
      target = null;
      draw();
      startBtn.disabled = false;
      alert('Fim de jogo! Sua pontuação foi: ' + score);
    }

    canvas.addEventListener('click', handleShot);
    startBtn.addEventListener('click', startGame);
  </script>
  <a href="index.html" class="btn-jogar">Voltar</a>
</body>
</html>
